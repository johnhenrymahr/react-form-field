# Form/Field Component

Simple component to help with forms.

## Goals

To avoid re-rendering the entire form on each change event, ie user keystroke, etc,
but still allow form level validation and some other useful features.
## Usage

```jsx
<Form onSubmit={ onSubmitHandler } >
  <p>Anything can be a child of Form</p>
  <Field
    className="my-form"
    name="testField"
    validate={ (name, value) => Boolean(value) }
   >
   <!-- Notice the child is a function that returns a component-->
    {
      ({ setFieldValueHandler, valid, validated, validateFieldHandler, value }) => (
        <input
          aria-invalid={validated && !valid}
          value={value}
          onChange={setFieldValueHandler}
          onBlur={validateFieldHandler}
        />
      )
    }
   </Field>
   <input type="submit" name="submit" value="Submit Form" />
</Form>
```

### Form

  Form creates a (html) form element and passes down props. It will clone any immediate (first level) descendants that are instances of Field and pass some special props to the Field. Other types of descendants will be untouched.

  There is a special prop called derivedProps. If provided (a function) it will be called with the current state with the expectation that the function will return an object of props which will then be merged into the form props. Not the greatest I know, but the only simple way I could figure out how to allow props to be based on current state.

#### Form Props

* __derivedProps__ (described above) (function), returns object of props

* __isDisabled__ (boolean) if true submit handler will not run

* __onSubmit__ (function) called only if form passes submit validation. Can be async (return a promise).  Arguments

  1. form value map { Field.name: Field.value }
  2. the form event object (if available)

* __onValidationError__ (function) called only when form FAILS validation. Can be async. Arguments.

  1. form value map { Field.name: Field.value }
  2. array of invalid field names
  3. the form event object (if available)

#### state

* __isSubmitting__ (boolean) set to true before submit handler runs and set to false after the appropriate handler runs (if the form is still mounted at that point).

### Field

Field will only really work if it is a first level descendant of Form. So keep that in mind.
Field uses the child props as a function pattern (which I guess is a pattern). So it expects its children prop to be a (single) function. It passes a argument with some props to use when rendering the actual form input. I am calling these props the child props.

#### Field Props

* __autoFill__ (function) *Child Prop* passed by Form. Invoke to update another Field in the Form. (Field.name, Field.value)

* __initialValue__ (number || string) if passed will be sent trough validation and set to Field state as value

* __isDisabled__ (boolean) *Child Prop* passed by Form, true if Form is disabled

* __isSubmitting__ (boolean) *Child Prop* passed by Form, true if Form is submitting, can use to disable submit button when Form is submitting.

* __name__ (string) *required* field name

* __onFieldUpdate__ (function) use in conjunction with validateFieldHandler, one that runs validation and sets result to state this function will be called with the following object of child props:
  * autoFill
  * isDisabled
  * isSubmitting
  * name
  * updateField
  * isValid
  * isValidated
  * value

* __registerGetter__ (function) supplied by Form. Form uses this to get a Field value.

* __registerUpdater__ (function) supplied by Form. Allows Form to update Field state (for autoFill).

* __shouldRegister__ (boolean) (default: true) if set to false Field will not register with Form. It will still get child props passed to it, but its value will not be a part of Form Data passed to __onSubmit__. Useful for submit buttons and such.

* __unregister__ (function) provided by Form, when a field is removed (because of form composition change) it removes its handlers from Form.

* __validate__ (function) validation function to run again Field value. Arguments:
1. Field.name
2. Field.value (current value)

* __valueSelector__ (function) function to return value from Event Object. Defaults to event.target.value. Passed event Object.

#### Derived Child Props

These are in addition to props marked as child above. They are generated by Field.

* __setFieldValueHandler__ (event handler function) this handler does not run validation, it just sets the field value to the Field state. Useful for an onChange handler when you only want to validate onBlur. But as we are using React controlled components we need to keep the state value in sync onChange as well as onBlur.

* __updateField__ (function) the state updater method. Runs validation and sets value. You can call directly if need to for some reason.

* __validateFieldHandler__ (event handler function) calls validate function (if provided) and sets to state, then calls __onFieldUpdate__ function (if provided).

* __isValid__ (boolean) if Field has passed validation.

* __isValidated__ (boolean) if Field has ever been validated.

* __value__ (string || number) current Field value.